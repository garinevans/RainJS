var RAINLAYOUT=RAINLAYOUT||{};String.prototype.format||(String.prototype.format=function(a){for(var b=/\{{1}\d\}{1}/gi,c=this.match(b),d=this,e=0;e<c.length;e++)d=d.replace(c[e],a[e]);return d}),function(a){var b={styleTag:"[style]",baseTemplate:'<div style="[style]" class="rain-droplet">{0}</div>'};RAINLAYOUT.droplet=function(){function c(){i.lastRow=[],i.currentRow=[],i.totalRowWidth=0,i.top=0,i.rowCount=0,i.margin=0}function d(a,c){var d=/\{{2}[\w|\.]*\}{2}/gi,e=RAINLAYOUT.settings.template.match(d),f=b.baseTemplate.format([RAINLAYOUT.settings.template]);if(f=f.replace(b.styleTag,c),!e)return f;for(var g=0;g<e.length;g++){var h=e[g],i=h.replace("{{","").replace("}}",""),j="";if(-1===i.indexOf("."))j=a[i];else{var k=i.split(".");j=a[k[0]][k[1]]}f=f.replace(h,j)}return f}function e(a){var b="position: absolute; top: {0}px; width: {1}px;".format([i.top,a]),c="left: {0}px;".format([i.totalRowWidth+i.margin]);return 0===i.totalRowWidth&&(c="left: {0}px;".format([i.margin])),b+c}function f(){var a=RAINLAYOUT.settings.dropletWidth*RAINLAYOUT.settings.maxDroplets+RAINLAYOUT.settings.guttering*(RAINLAYOUT.settings.maxDroplets-1);if(a>window.innerWidth){var b=Math.floor(window.innerWidth/(RAINLAYOUT.settings.dropletWidth+RAINLAYOUT.settings.guttering));a=RAINLAYOUT.settings.dropletWidth*b+RAINLAYOUT.settings.guttering*(b-1)}var c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return i.margin=(c-a)/2,i.top=0,void 0!==i.lastRow[i.rowCount]&&i.lastRow[i.rowCount].height>0&&(i.top=i.lastRow[i.rowCount].height+i.lastRow[i.rowCount].top+RAINLAYOUT.settings.guttering),{maxWidth:a,windowWidth:c}}function g(a){i.totalRowWidth+=RAINLAYOUT.settings.dropletWidth+RAINLAYOUT.settings.guttering,i.totalRowWidth>a.maxWidth&&(i.totalRowWidth=0,i.lastRow=i.currentRow.slice(0),i.currentRow=[],i.rowCount=0)}function h(b,c){var h=f(),j=e(RAINLAYOUT.settings.dropletWidth),k=d(b,j),l=a(k);c.append(l);var m=l.outerHeight();i.currentRow.push({height:m,top:i.top}),i.rowCount++,g(h)}var i={lastRow:[],currentRow:[],totalRowWidth:0,top:0,rowCount:0,margin:0};return{create:h,resetGlobals:c}}()}(window.jQuery);var RAINLAYOUT=RAINLAYOUT||{};RAINLAYOUT.settings={template:'<img src="{{image.src}}" height="{{image.height}}" /><p>{{description}}</p>',maxDroplets:5,guttering:10,dropletWidth:200},RAINLAYOUT.core=function(){function a(a,b){if(null===a||void 0===a)return void console.log("RAIN: Invalid parent");if(null===b||void 0===b)return void console.log("RAIN: No data");a.html("");for(var c=0;c<b.length;c++)RAINLAYOUT.droplet.create(b[c],a)}function b(b,c,d){d&&(d.template&&(RAINLAYOUT.settings.template=d.template),d.maxDroplets&&(RAINLAYOUT.settings.maxDroplets=d.maxDroplets),d.guttering&&(RAINLAYOUT.settings.guttering=d.guttering),d.dropletWidth&&(RAINLAYOUT.settings.dropletWidth=d.dropletWidth)),console.log(RAINLAYOUT),RAINLAYOUT.droplet.resetGlobals(),a(b,c)}return{pour:b}}();var RAIN=function(){return{pour:RAINLAYOUT.core.pour}}();